{
  "_meta": {
    "collected_at": "2026-02-13T09:04:33.567Z",
    "workspace": "agent-office-dashboard",
    "terminal_session": "term-a1b2c3d4",
    "run": "run-2026-02-13-001",
    "description": "Coder creates new auth middleware file"
  },
  "event_name": "PreToolUse",
  "session_id": "a3bb189e-8bf9-3888-9912-ace4e6543002",
  "tool_name": "Write",
  "tool_input": {
    "file_path": "/home/taniar/git/agent-office-dashboard/apps/backend/src/middleware/auth.ts",
    "content": "import { FastifyRequest, FastifyReply } from 'fastify';\nimport jwt from 'jsonwebtoken';\nimport { config } from '../config';\n\nexport async function authMiddleware(request: FastifyRequest, reply: FastifyReply) {\n  const token = request.headers.authorization?.replace('Bearer ', '');\n  if (!token) {\n    return reply.code(401).send({ error: 'Missing token' });\n  }\n  try {\n    const decoded = jwt.verify(token, config.jwtSecret);\n    request.user = decoded;\n  } catch (err) {\n    return reply.code(401).send({ error: 'Invalid token' });\n  }\n}\n"
  }
}
