import i18n from "i18next";
import { initReactI18next } from "react-i18next";

const resources = {
  ko: {
    translation: {
      app_title: "에이전트 오피스 대시보드",
      tab_office: "오피스",
      tab_dashboard: "대시보드",
      tab_agents: "에이전트",
      tab_settings: "설정",
      common_all: "전체",
      common_loading: "불러오는 중...",
      common_workspace: "워크스페이스",
      common_terminal: "터미널",
      common_run: "실행",
      common_status: "상태",
      common_last: "마지막",
      dashboard_title: "대시보드",
      dashboard_subtitle: "상태 카드 + 타임라인 + Time Travel(전후 문맥) 패널.",
      dashboard_hooks_missing: "Hooks 미설정 상태입니다. 현재 모드: {{mode}}. 실시간 정확도가 낮을 수 있습니다.",
      dashboard_open_settings: "설정에서 안내/설치",
      dashboard_stat_total_agents: "총 에이전트",
      dashboard_stat_failed: "실패",
      dashboard_stat_working: "작업중",
      dashboard_stat_events: "이벤트(표시)",
      dashboard_agent_cards: "Agent Status Cards",
      dashboard_agents_empty: "에이전트가 없습니다. seed-mock를 실행해보세요.",
      dashboard_recent_events: "최근 이벤트",
      dashboard_time_travel_title: "Time Travel Context",
      dashboard_select_event_prompt: "이벤트를 선택하세요.",
      dashboard_agent_snapshot: "Agent Snapshot",
      dashboard_events_until_pivot: "pivot까지 이벤트 수",
      dashboard_last_event_ts: "마지막 이벤트 시각",
      agents_title: "에이전트",
      agents_subtitle: "저장 에이전트는 정직원, 임시 호출 에이전트는 계약직으로 표시합니다.",
      agents_filter_employment: "고용형태 필터",
      agents_employee: "정직원",
      agents_contractor: "계약직",
      agents_list: "목록",
      agents_empty: "표시할 에이전트가 없습니다.",
      agents_detail: "상세",
      agents_select_prompt: "에이전트를 선택하세요.",
      agents_meta: "역할: {{role}} / 고용형태: {{employment}} / 상태: {{status}}",
      agents_tools: "도구",
      agents_expertise: "전문영역",
      agents_go_office: "Office에서 위치 보기",
      agents_recent_events: "최근 이벤트",
      settings_title: "설정",
      settings_lang_motion: "언어 / 모션",
      settings_lang_motion_desc: "i18n 기반 설정(MVP는 로컬 저장 후 즉시 반영).",
      settings_language: "언어",
      settings_motion: "모션 강도",
      settings_layout_profile: "레이아웃 프로필",
      settings_hooks_title: "Hooks 온보딩",
      settings_status_checking: "상태 확인 중...",
      settings_mode: "모드",
      settings_hooks_configured: "hooks 설정 여부",
      settings_last_checked: "마지막 확인",
      settings_last_hook_event: "마지막 hook 이벤트",
      settings_checked_files: "확인한 파일",
      settings_btn_guide: "설정 가이드 보기",
      settings_btn_install: "자동 설정 시도",
      settings_btn_refresh: "상태 새로고침",
      settings_result_ok: "성공",
      settings_result_mode: "모드",
      settings_result_target: "대상 파일",
      settings_result_next: "다음 단계",
      office_title: "오피스",
      office_subtitle: "좌측 T자(팀장 포함) + 중앙 블록 + 우측 탕비실(kr_t_left_v2) 레이아웃입니다.",
      office_zone_entrance: "입구",
      office_zone_t: "좌측 T 구역",
      office_zone_center: "중앙 팀원 구역",
      office_zone_pantry: "탕비실",
      office_zone_pantry_lane: "탕비실 문 동선",
      office_zone_meeting: "미팅 레인",
      office_focus_title: "포커스 에이전트",
      office_focus_status: "상태",
      office_focus_last_event: "마지막 이벤트",
      office_focus_recent_events: "최근 이벤트",
      office_focus_open_agents: "Agents 탭으로 이동",
      office_focus_hint: "현재 선택된 에이전트는 오피스에서 하이라이트됩니다.",
      office_focus_empty_recent: "최근 이벤트가 없습니다.",
      dashboard_before: "Before",
      dashboard_pivot: "Pivot",
      dashboard_after: "After"
    }
  },
  en: {
    translation: {
      app_title: "Agent Office Dashboard",
      tab_office: "Office",
      tab_dashboard: "Dashboard",
      tab_agents: "Agents",
      tab_settings: "Settings",
      common_all: "All",
      common_loading: "Loading...",
      common_workspace: "Workspace",
      common_terminal: "Terminal",
      common_run: "Run",
      common_status: "Status",
      common_last: "Last",
      dashboard_title: "Dashboard",
      dashboard_subtitle: "Status cards + timeline + time-travel context.",
      dashboard_hooks_missing: "Hooks are not configured. Current mode: {{mode}}. Realtime accuracy may be degraded.",
      dashboard_open_settings: "Open settings",
      dashboard_stat_total_agents: "Total Agents",
      dashboard_stat_failed: "Failed",
      dashboard_stat_working: "Working",
      dashboard_stat_events: "Events",
      dashboard_agent_cards: "Agent Status Cards",
      dashboard_agents_empty: "No agents yet. Run seed-mock.",
      dashboard_recent_events: "Recent Events",
      dashboard_time_travel_title: "Time Travel Context",
      dashboard_select_event_prompt: "Select an event.",
      dashboard_agent_snapshot: "Agent Snapshot",
      dashboard_events_until_pivot: "Events until pivot",
      dashboard_last_event_ts: "Last event timestamp",
      agents_title: "Agents",
      agents_subtitle: "Saved agents are labeled Employee, temporary runtime agents are labeled Contractor.",
      agents_filter_employment: "Employment Filter",
      agents_employee: "Employee",
      agents_contractor: "Contractor",
      agents_list: "List",
      agents_empty: "No agents to display.",
      agents_detail: "Detail",
      agents_select_prompt: "Select an agent.",
      agents_meta: "Role: {{role}} / Employment: {{employment}} / Status: {{status}}",
      agents_tools: "Tools",
      agents_expertise: "Expertise",
      agents_go_office: "Locate in Office",
      agents_recent_events: "Recent Events",
      settings_title: "Settings",
      settings_lang_motion: "Language / Motion",
      settings_lang_motion_desc: "i18n-based settings (MVP persists locally and applies immediately).",
      settings_language: "Language",
      settings_motion: "Motion",
      settings_layout_profile: "Layout profile",
      settings_hooks_title: "Hooks Onboarding",
      settings_status_checking: "Checking status...",
      settings_mode: "Mode",
      settings_hooks_configured: "Hooks configured",
      settings_last_checked: "Last checked",
      settings_last_hook_event: "Last hook event",
      settings_checked_files: "Checked files",
      settings_btn_guide: "Open guide",
      settings_btn_install: "Try auto install",
      settings_btn_refresh: "Refresh status",
      settings_result_ok: "OK",
      settings_result_mode: "Mode",
      settings_result_target: "Target file",
      settings_result_next: "Next step",
      office_title: "Office",
      office_subtitle: "Left T cluster (manager) + center block + pantry zone (kr_t_left_v2).",
      office_zone_entrance: "Entrance",
      office_zone_t: "Left T Cluster",
      office_zone_center: "Center Block",
      office_zone_pantry: "Pantry",
      office_zone_pantry_lane: "Pantry Door Lane",
      office_zone_meeting: "Meeting Lane",
      office_focus_title: "Focus Agent",
      office_focus_status: "Status",
      office_focus_last_event: "Last event",
      office_focus_recent_events: "Recent events",
      office_focus_open_agents: "Open in Agents",
      office_focus_hint: "The selected agent is highlighted in the office.",
      office_focus_empty_recent: "No recent events.",
      dashboard_before: "Before",
      dashboard_pivot: "Pivot",
      dashboard_after: "After"
    }
  }
};

const savedLang = (() => {
  try {
    const raw = localStorage.getItem("aod.ui.settings.v1");
    if (!raw) return "ko";
    const parsed = JSON.parse(raw) as { language?: "ko" | "en" };
    return parsed.language === "en" ? "en" : "ko";
  } catch {
    return "ko";
  }
})();

void i18n.use(initReactI18next).init({
  resources,
  lng: savedLang,
  fallbackLng: "en",
  interpolation: { escapeValue: false }
});

export default i18n;
