import i18n from "i18next";
import { initReactI18next } from "react-i18next";

const resources = {
  ko: {
    translation: {
      app_title: "에이전트 오피스 대시보드",
      tab_office: "오피스",
      tab_dashboard: "대시보드",
      tab_agents: "에이전트",
      tab_settings: "설정",
      common_all: "전체",
      common_loading: "불러오는 중...",
      common_workspace: "워크스페이스",
      common_terminal: "터미널",
      common_run: "실행",
      common_status: "상태",
      common_last: "마지막",
      dashboard_title: "대시보드",
      dashboard_subtitle: "상태 카드 + 타임라인 + Time Travel(전후 문맥) 패널.",
      dashboard_hooks_missing: "Hooks 미설정 상태입니다. 현재 모드: {{mode}}. 실시간 정확도가 낮을 수 있습니다.",
      dashboard_open_settings: "설정에서 안내/설치",
      dashboard_stat_total_agents: "총 에이전트",
      dashboard_stat_failed: "실패",
      dashboard_stat_working: "작업중",
      dashboard_stat_events: "이벤트(표시)",
      dashboard_agent_cards: "Agent Status Cards",
      dashboard_agents_empty: "에이전트가 없습니다. seed-mock를 실행해보세요.",
      dashboard_recent_events: "최근 이벤트",
      dashboard_time_travel_title: "Time Travel Context",
      dashboard_select_event_prompt: "이벤트를 선택하세요.",
      dashboard_agent_snapshot: "Agent Snapshot",
      dashboard_events_until_pivot: "pivot까지 이벤트 수",
      dashboard_last_event_ts: "마지막 이벤트 시각",
      agents_title: "에이전트",
      agents_subtitle: "저장 에이전트는 정직원, 임시 호출 에이전트는 계약직으로 표시합니다.",
      agents_filter_employment: "고용형태 필터",
      agents_employee: "정직원",
      agents_contractor: "계약직",
      agents_list: "목록",
      agents_empty: "표시할 에이전트가 없습니다.",
      agents_detail: "상세",
      agents_select_prompt: "에이전트를 선택하세요.",
      agents_meta: "역할: {{role}} / 고용형태: {{employment}} / 상태: {{status}}",
      agents_tools: "도구",
      agents_expertise: "전문영역",
      agents_go_office: "Office에서 위치 보기",
      agents_recent_events: "최근 이벤트",
      settings_title: "설정",
      settings_lang_motion: "언어 / 모션",
      settings_lang_motion_desc: "i18n 기반 설정(MVP는 로컬 저장 후 즉시 반영).",
      settings_language: "언어",
      settings_motion: "모션 강도",
      settings_layout_profile: "좌석 배치 프로필",
      settings_layout_profile_help: "테마가 아니라 오피스 좌석/구역 배치 프리셋입니다.",
      settings_hooks_title: "Hooks 온보딩",
      settings_status_checking: "상태 확인 중...",
      settings_mode: "모드",
      settings_hooks_configured: "hooks 설정 여부",
      settings_last_checked: "마지막 확인",
      settings_last_hook_event: "마지막 hook 이벤트",
      settings_checked_files: "확인한 파일",
      settings_btn_guide: "설정 가이드 보기",
      settings_btn_install: "자동 설정 시도",
      settings_btn_refresh: "상태 새로고침",
      settings_btn_save: "설정 저장",
      settings_saved: "설정이 저장되었습니다.",
      settings_result_ok: "성공",
      settings_result_mode: "모드",
      settings_result_target: "대상 파일",
      settings_result_next: "다음 단계",
      settings_global_hooks_title: "Claude 전역 Hooks 추가",
      settings_global_hooks_desc: "전역 설정(~/.claude/settings.json)에 AOD hooks를 병합합니다. 기존 설정은 유지됩니다.",
      settings_btn_install_global: "전역에 Hooks 추가",
      settings_global_added: "추가됨",
      settings_global_skipped: "이미 있어 건너뜀",
      settings_global_backup: "백업 파일",
      office_title: "오피스",
      office_subtitle: "좌측 T자(팀장 포함) + 중앙 블록 + 우측 탕비실(kr_t_left_v2) 레이아웃입니다.",
      office_zone_entrance: "입구",
      office_zone_t: "좌측 T 구역",
      office_zone_center: "중앙 팀원 구역",
      office_zone_pantry: "탕비실",
      office_zone_pantry_lane: "탕비실 문 동선",
      office_zone_meeting: "미팅 레인",
      office_focus_title: "포커스 에이전트",
      office_focus_status: "상태",
      office_focus_last_event: "마지막 이벤트",
      office_focus_recent_events: "최근 이벤트",
      office_focus_open_agents: "Agents 탭으로 이동",
      office_focus_hint: "현재 선택된 에이전트는 오피스에서 하이라이트됩니다.",
      office_focus_empty_recent: "최근 이벤트가 없습니다.",
      dashboard_before: "Before",
      dashboard_pivot: "Pivot",
      dashboard_after: "After",
      dashboard_active_tasks: "활성 작업",
      common_assignee: "담당자",
      common_elapsed: "경과 시간",
      common_thinking: "속마음",
      settings_thought_bubble_title: "Thought Bubble (속마음)",
      settings_thought_bubble_desc: "에이전트의 extended thinking 데이터를 말풍선으로 표시합니다.",
      settings_thought_bubble_enabled: "Thought Bubble 표시",
      settings_thought_bubble_max_length: "최대 글자수",
      settings_translation_title: "번역 설정",
      settings_translation_enabled: "번역 활성화",
      settings_translation_api_endpoint: "API Endpoint",
      settings_translation_api_key: "API Key",
      settings_translation_model: "모델",
      settings_translation_target_language: "번역 대상 언어",
      settings_thought_bubble_save: "저장",
      settings_thought_bubble_save_ok: "저장 완료",
      settings_thought_bubble_save_fail: "저장 실패: {{error}}",
      dashboard_thinking: "속마음",
      agents_thinking: "속마음",
      dashboard_stat_active_tasks: "진행 중 작업",
      dashboard_active_tasks_empty: "진행 중인 작업이 없습니다.",
      dashboard_col_task_id: "작업 ID",
      dashboard_col_agent: "에이전트",
      dashboard_col_elapsed: "경과 시간",
      dashboard_alert_title: "경고",
      dashboard_alert_empty: "경고 없음",
      dashboard_alert_disabled: "실패 알림이 비활성화되어 있습니다.",
      dashboard_alert_go_settings: "설정에서 변경",
      dashboard_alert_pending: "입력 대기 초과",
      dashboard_alert_failed: "실패 상태 지속",
      dashboard_alert_stale: "비활성 에이전트",
      error_modal_title: "오류",
      error_modal_close_all: "모두 닫기",
      settings_connection_title: "연결 설정",
      settings_connection_api_url: "API URL",
      settings_connection_ws_url: "WebSocket URL",
      settings_connection_refresh_hint: "변경 시 새로고침이 필요합니다.",
      settings_seat_editor_title: "좌석 좌표 편집",
      settings_seat_key: "좌석 키",
      settings_seat_x: "X",
      settings_seat_y: "Y",
      settings_seat_restore_defaults: "기본값 복원",
      settings_transition_title: "상태 전이 규칙",
      settings_transition_from: "From",
      settings_transition_event: "Event",
      settings_transition_to: "To",
      settings_transition_add: "규칙 추가",
      settings_transition_remove: "삭제",
      settings_operations_title: "운영 임계값",
      settings_operations_pending_seconds: "입력 대기 경고 (초)",
      settings_operations_failed_seconds: "실패 경고 (초)",
      settings_operations_stale_seconds: "비활성 경고 (초)",
      settings_operations_failure_enabled: "실패 알림 활성화"
    }
  },
  en: {
    translation: {
      app_title: "Agent Office Dashboard",
      tab_office: "Office",
      tab_dashboard: "Dashboard",
      tab_agents: "Agents",
      tab_settings: "Settings",
      common_all: "All",
      common_loading: "Loading...",
      common_workspace: "Workspace",
      common_terminal: "Terminal",
      common_run: "Run",
      common_status: "Status",
      common_last: "Last",
      dashboard_title: "Dashboard",
      dashboard_subtitle: "Status cards + timeline + time-travel context.",
      dashboard_hooks_missing: "Hooks are not configured. Current mode: {{mode}}. Realtime accuracy may be degraded.",
      dashboard_open_settings: "Open settings",
      dashboard_stat_total_agents: "Total Agents",
      dashboard_stat_failed: "Failed",
      dashboard_stat_working: "Working",
      dashboard_stat_events: "Events",
      dashboard_agent_cards: "Agent Status Cards",
      dashboard_agents_empty: "No agents yet. Run seed-mock.",
      dashboard_recent_events: "Recent Events",
      dashboard_time_travel_title: "Time Travel Context",
      dashboard_select_event_prompt: "Select an event.",
      dashboard_agent_snapshot: "Agent Snapshot",
      dashboard_events_until_pivot: "Events until pivot",
      dashboard_last_event_ts: "Last event timestamp",
      agents_title: "Agents",
      agents_subtitle: "Saved agents are labeled Employee, temporary runtime agents are labeled Contractor.",
      agents_filter_employment: "Employment Filter",
      agents_employee: "Employee",
      agents_contractor: "Contractor",
      agents_list: "List",
      agents_empty: "No agents to display.",
      agents_detail: "Detail",
      agents_select_prompt: "Select an agent.",
      agents_meta: "Role: {{role}} / Employment: {{employment}} / Status: {{status}}",
      agents_tools: "Tools",
      agents_expertise: "Expertise",
      agents_go_office: "Locate in Office",
      agents_recent_events: "Recent Events",
      settings_title: "Settings",
      settings_lang_motion: "Language / Motion",
      settings_lang_motion_desc: "i18n-based settings (MVP persists locally and applies immediately).",
      settings_language: "Language",
      settings_motion: "Motion",
      settings_layout_profile: "Seat layout profile",
      settings_layout_profile_help: "This is a seating/zone layout preset, not a visual theme.",
      settings_hooks_title: "Hooks Onboarding",
      settings_status_checking: "Checking status...",
      settings_mode: "Mode",
      settings_hooks_configured: "Hooks configured",
      settings_last_checked: "Last checked",
      settings_last_hook_event: "Last hook event",
      settings_checked_files: "Checked files",
      settings_btn_guide: "Open guide",
      settings_btn_install: "Try auto install",
      settings_btn_refresh: "Refresh status",
      settings_btn_save: "Save settings",
      settings_saved: "Settings saved.",
      settings_result_ok: "OK",
      settings_result_mode: "Mode",
      settings_result_target: "Target file",
      settings_result_next: "Next step",
      settings_global_hooks_title: "Add Global Claude Hooks",
      settings_global_hooks_desc: "Merge AOD hooks into global settings (~/.claude/settings.json). Existing settings are preserved.",
      settings_btn_install_global: "Add Hooks to Global",
      settings_global_added: "Added",
      settings_global_skipped: "Already exists, skipped",
      settings_global_backup: "Backup file",
      office_title: "Office",
      office_subtitle: "Left T cluster (manager) + center block + pantry zone (kr_t_left_v2).",
      office_zone_entrance: "Entrance",
      office_zone_t: "Left T Cluster",
      office_zone_center: "Center Block",
      office_zone_pantry: "Pantry",
      office_zone_pantry_lane: "Pantry Door Lane",
      office_zone_meeting: "Meeting Lane",
      office_focus_title: "Focus Agent",
      office_focus_status: "Status",
      office_focus_last_event: "Last event",
      office_focus_recent_events: "Recent events",
      office_focus_open_agents: "Open in Agents",
      office_focus_hint: "The selected agent is highlighted in the office.",
      office_focus_empty_recent: "No recent events.",
      dashboard_before: "Before",
      dashboard_pivot: "Pivot",
      dashboard_after: "After",
      dashboard_active_tasks: "Active Tasks",
      common_assignee: "Assignee",
      common_elapsed: "Elapsed",
      common_thinking: "Thinking",
      settings_thought_bubble_title: "Thought Bubble",
      settings_thought_bubble_desc: "Display agent's extended thinking data as thought bubbles.",
      settings_thought_bubble_enabled: "Show Thought Bubbles",
      settings_thought_bubble_max_length: "Max Length",
      settings_translation_title: "Translation",
      settings_translation_enabled: "Enable Translation",
      settings_translation_api_endpoint: "API Endpoint",
      settings_translation_api_key: "API Key",
      settings_translation_model: "Model",
      settings_translation_target_language: "Target Language",
      settings_thought_bubble_save: "Save",
      settings_thought_bubble_save_ok: "Saved",
      settings_thought_bubble_save_fail: "Save failed: {{error}}",
      dashboard_thinking: "Thinking",
      agents_thinking: "Thinking",
      dashboard_stat_active_tasks: "Active Tasks",
      dashboard_active_tasks_empty: "No active tasks.",
      dashboard_col_task_id: "Task ID",
      dashboard_col_agent: "Agent",
      dashboard_col_elapsed: "Elapsed",
      dashboard_alert_title: "Alerts",
      dashboard_alert_empty: "No alerts",
      dashboard_alert_disabled: "Failure alerts are disabled.",
      dashboard_alert_go_settings: "Change in Settings",
      dashboard_alert_pending: "Pending input timeout",
      dashboard_alert_failed: "Failed state persists",
      dashboard_alert_stale: "Stale agent",
      error_modal_title: "Errors",
      error_modal_close_all: "Close all",
      settings_connection_title: "Connection Settings",
      settings_connection_api_url: "API URL",
      settings_connection_ws_url: "WebSocket URL",
      settings_connection_refresh_hint: "Reload required after changes.",
      settings_seat_editor_title: "Seat Position Editor",
      settings_seat_key: "Seat Key",
      settings_seat_x: "X",
      settings_seat_y: "Y",
      settings_seat_restore_defaults: "Restore defaults",
      settings_transition_title: "Transition Rules",
      settings_transition_from: "From",
      settings_transition_event: "Event",
      settings_transition_to: "To",
      settings_transition_add: "Add rule",
      settings_transition_remove: "Remove",
      settings_operations_title: "Operations Thresholds",
      settings_operations_pending_seconds: "Pending input alert (sec)",
      settings_operations_failed_seconds: "Failed alert (sec)",
      settings_operations_stale_seconds: "Stale agent alert (sec)",
      settings_operations_failure_enabled: "Enable failure alerts"
    }
  }
};

const savedLang = (() => {
  try {
    const raw = localStorage.getItem("aod.ui.settings.v1");
    if (!raw) return "ko";
    const parsed = JSON.parse(raw) as { language?: "ko" | "en" };
    return parsed.language === "en" ? "en" : "ko";
  } catch {
    return "ko";
  }
})();

void i18n.use(initReactI18next).init({
  resources,
  lng: savedLang,
  fallbackLng: "en",
  interpolation: { escapeValue: false }
});

export default i18n;
